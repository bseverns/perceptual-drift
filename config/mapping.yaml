# Control mapping curves
osc:
  port: 9000
  address_space:
    altitude: "/pd/alt"
    lateral: "/pd/lat"
    yaw: "/pd/yaw"
    crowd: "/pd/crowd"
    consent: "/pd/consent"

# Consent is the floor-based participation zone published by the Processing
# tracker. Treat it like any other gesture input so we can gate behavior
# without hard-coding policy in Python.
consent:
  source: "/pd/consent"
  mode: "binary"          # "binary" gates to 0/1; "smooth" scales motion
  default_state: 1         # if no signal arrives, assume participation is allowed
  gate_motion: true        # if true, scale or idle motion fields when consent=0
  idle_altitude: 0.2       # normalized altitude to hold when consent=0
  idle_jitter: 0.0         # jitter when nobody is in the participation zone
  on_recipe: "ambient"    # optional recipe to jump to on consent ON
  off_recipe: "none"      # optional recipe to jump to on consent OFF
  auto_recipes: false      # flip to true to enable the auto-recipe edges

mapping:
  altitude:
    deadzone: 0.05
    curve: "expo"
    gain: 0.6
  lateral:
    deadzone: 0.05
    curve: "linear"
    gain: 0.5
  yaw_bias:
    bias: 0.1
    jitter: 0.05
  leds:
    palette: ["#1e90ff", "#ff1493", "#32cd32", "#ffd700"]
  glitch_intensity:
    base: 0.2
    max: 0.9

bridge:
  hz: 50
  mode: smooth
  stale_after: 0.35      # watchdog neutralizes live gestures after N seconds of OSC silence (0 disables)
  modes:
    smooth:
      description: "Continuous mapping for rehearsal and most shows."
      aux_strategy: full
      neutral_rc: false
      jitter_scale: 1.0
    triggers_only:
      description: "Heavier shaping on alt/lat with jitter toned down for trigger rigs."
      deadzone_boost:
        altitude: 0.08
        lateral: 0.08
      gain_scale:
        altitude: 0.6
        lateral: 0.6
      jitter_scale: 0.2
      aux_strategy: full
      neutral_rc: false
    idle_visuals:
      description: "Crowd drives AUX/visuals while RC sticks park neutral."
      gain_scale:
        altitude: 0.0
        lateral: 0.0
        yaw: 0.0
      jitter_scale: 0.0
      aux_strategy: crowd_only
      neutral_rc: true
